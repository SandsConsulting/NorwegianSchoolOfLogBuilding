(function(){function i(n,t,i){n.addEventListener?n.addEventListener(t,i,!0):n.attachEvent(t,i)}function n(n,t){if(typeof n=="undefined")return!1;var i="innerText"in n?"innerText":"textContent";try{n[i]=t}catch(r){n.setAttribute("innerText",t)}}videojs.Youtube=videojs.MediaTechController.extend({init:function(t,i,r){var e,f,o,s,u;if(this.player_=t,this.featuresProgressEvents=!1,this.featuresTimeupdateEvents=!1,this.featuresPlaybackRate=!0,videojs.MediaTechController.call(this,t,i,r),this.isIos=/(iPad|iPhone|iPod)/g.test(navigator.userAgent),this.isAndroid=/(Android)/g.test(navigator.userAgent),this.playVideoIsAllowed=!(this.isIos||this.isAndroid),(this.isIos||this.isAndroid)&&(this.player_.options().autoplay=!1),typeof i.source!="undefined")for(e in i.source)i.source.hasOwnProperty(e)&&(t.options()[e]=i.source[e]);this.userQuality=videojs.Youtube.convertQualityName(t.options().quality);this.playerEl_=document.getElementById(t.id());this.playerEl_.className+=" vjs-youtube";this.qualityButton=document.createElement("div");this.qualityButton.setAttribute("class","vjs-quality-button vjs-menu-button vjs-control");this.qualityButton.setAttribute("tabindex",0);f=document.createElement("div");f.setAttribute("class","vjs-control-content");this.qualityButton.appendChild(f);this.qualityTitle=document.createElement("span");this.qualityTitle.setAttribute("class","vjs-control-text");f.appendChild(this.qualityTitle);t.options().quality!=="undefined"&&n(this.qualityTitle,t.options().quality||"auto");o=document.createElement("div");o.setAttribute("class","vjs-menu");f.appendChild(o);this.qualityMenuContent=document.createElement("ul");this.qualityMenuContent.setAttribute("class","vjs-menu-content");o.appendChild(this.qualityMenuContent);this.id_=this.player_.id()+"_youtube_api";this.el_=videojs.Component.prototype.createEl("iframe",{id:this.id_,className:"vjs-tech",scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0});this.el_.setAttribute("allowFullScreen","");this.playerEl_.insertBefore(this.el_,this.playerEl_.firstChild);/MSIE (\d+\.\d+);/.test(navigator.userAgent)?(s=Number(RegExp.$1),this.addIframeBlocker(s)):/(iPad|iPhone|iPod|Android)/g.test(navigator.userAgent)||(this.el_.className+=" onDesktop",this.addIframeBlocker());this.parseSrc(t.options().src);this.playOnReady=this.player_.options().autoplay&&this.playVideoIsAllowed;this.forceSSL=!!(typeof this.player_.options().forceSSL=="undefined"||this.player_.options().forceSSL===!0);this.forceHTML5=!!(typeof this.player_.options().forceHTML5=="undefined"||this.player_.options().forceHTML5===!0);this.updateIframeSrc();u=this;t.ready(function(){if(u.player_.options().controls){var n=u.playerEl_.querySelectorAll(".vjs-control-bar")[0];n&&n.appendChild(u.qualityButton)}u.playOnReady&&!u.player_.options().ytcontrols&&(typeof u.player_.loadingSpinner!="undefined"&&u.player_.loadingSpinner.show(),typeof u.player_.bigPlayButton!="undefined"&&u.player_.bigPlayButton.hide());t.trigger("loadstart")});this.on("dispose",function(){this.ytplayer&&this.ytplayer.destroy();this.player_.options().ytcontrols||this.player_.off("waiting",this.bindedWaiting);this.playerEl_.querySelectorAll(".vjs-poster")[0].style.backgroundImage="none";this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_);this.qualityButton.parentNode&&this.qualityButton.parentNode.removeChild(this.qualityButton);typeof this.player_.loadingSpinner!="undefined"&&this.player_.loadingSpinner.hide();typeof this.player_.bigPlayButton!="undefined"&&this.player_.bigPlayButton.hide();this.iframeblocker&&this.playerEl_.removeChild(this.iframeblocker)})}});videojs.Youtube.prototype.updateIframeSrc=function(){var n={enablejsapi:1,iv_load_policy:3,playerapiid:this.id(),disablekb:1,wmode:"transparent",controls:this.player_.options().ytcontrols?1:0,html5:this.player_.options().forceHTML5?1:null,playsinline:this.player_.options().playsInline?1:0,showinfo:0,rel:0,autoplay:this.playOnReady?1:0,loop:this.player_.options().loop?1:0,list:this.playlistId,vq:this.userQuality,origin:window.location.protocol+"//"+window.location.host},u=window.location.protocol==="file:"||window.location.protocol==="app:",i,t,r,f;u&&delete n.origin;for(i in n)n.hasOwnProperty(i)&&(typeof n[i]=="undefined"||n[i]===null)&&delete n[i];if(t=this,this.videoId){this.el_.src=(this.forceSSL||u?"https:":window.location.protocol)+"//www.youtube.com/embed/"+this.videoId+"?"+videojs.Youtube.makeQueryString(n);this.player_.options().ytcontrols?this.player_.controls(!1):(typeof this.player_.poster()=="undefined"||this.player_.poster().length===0)&&setTimeout(function(){t.player_.poster("https://img.youtube.com/vi/"+t.videoId+"/0.jpg")},100);this.bindedWaiting=function(){t.onWaiting()};this.player_.on("waiting",this.bindedWaiting);videojs.Youtube.apiReady?this.loadYoutube():(videojs.Youtube.loadingQueue.push(this),videojs.Youtube.apiLoading||(r=document.createElement("script"),r.onerror=function(n){t.onError(n)},r.src=!this.forceSSL&&!u?"//www.youtube.com/iframe_api":"https://www.youtube.com/iframe_api",f=document.getElementsByTagName("script")[0],f.parentNode.insertBefore(r,f),videojs.Youtube.apiLoading=!0))}else this.el_.src="about:blank",setTimeout(function(){t.triggerReady()},500)};videojs.Youtube.prototype.onWaiting=function(){typeof this.player_.bigPlayButton!="undefined"&&this.player_.bigPlayButton.hide()};videojs.Youtube.prototype.addIframeBlocker=function(n){this.iframeblocker=videojs.Component.prototype.createEl("div");this.iframeblocker.className="iframeblocker";this.iframeblocker.style.position="absolute";this.iframeblocker.style.left=0;this.iframeblocker.style.right=0;this.iframeblocker.style.top=0;this.iframeblocker.style.bottom=0;n&&n<9?this.iframeblocker.style.opacity=.01:this.iframeblocker.style.background="rgba(255, 255, 255, 0.01)";var t=this;i(this.iframeblocker,"mousemove",function(n){t.player_.userActive()||t.player_.userActive(!0);n.stopPropagation();n.preventDefault()});i(this.iframeblocker,"click",function(){t.paused()?t.play():t.pause()});this.playerEl_.insertBefore(this.iframeblocker,this.el_.nextSibling)};videojs.Youtube.prototype.parseSrc=function(t){var r,i,u,f;this.srcVal=t;t&&(r=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,i=t.match(r),this.videoId=i&&i[2].length===11?i[2]:null,u=/[?&]list=([^#\&\?]+)/,i=t.match(u),i!==null&&i.length>1?this.playlistId=i[1]:this.playlistId&&delete this.playlistId,f=/[?&]vq=([^#\&\?]+)/,i=t.match(f),i!==null&&i.length>1&&(this.userQuality=i[1],n(this.qualityTitle,videojs.Youtube.parseQualityName(this.userQuality))))};videojs.Youtube.prototype.src=function(n){if(typeof n!="undefined"){if(this.parseSrc(n),this.el_.src==="about:blank"){this.updateIframeSrc();return}delete this.defaultQuality;this.videoId!==null&&(this.player_.options().autoplay&&this.playVideoIsAllowed?this.ytplayer.loadVideoById({videoId:this.videoId,suggestedQuality:this.userQuality}):this.ytplayer.cueVideoById({videoId:this.videoId,suggestedQuality:this.userQuality}),this.playerEl_.querySelectorAll(".vjs-poster")[0].style.backgroundImage="url(https://img.youtube.com/vi/"+this.videoId+"/0.jpg)",this.player_.poster("https://img.youtube.com/vi/"+this.videoId+"/0.jpg"))}return this.srcVal};videojs.Youtube.prototype.load=function(){};videojs.Youtube.prototype.play=function(){this.videoId!==null&&(this.player_.options().ytcontrols||this.player_.trigger("waiting"),this.isReady_?(this.ytplayer.setVolume(this.player_.volume()*100),this.volumeVal>0?this.ytplayer.unMute():this.ytplayer.mute(),this.playVideoIsAllowed&&this.ytplayer.playVideo()):this.playOnReady=!0)};videojs.Youtube.prototype.pause=function(){this.ytplayer.pauseVideo()};videojs.Youtube.prototype.paused=function(){return this.ytplayer?this.lastState!==YT.PlayerState.PLAYING&&this.lastState!==YT.PlayerState.BUFFERING:!0};videojs.Youtube.prototype.currentTime=function(){return this.ytplayer&&this.ytplayer.getCurrentTime?this.ytplayer.getCurrentTime():0};videojs.Youtube.prototype.setCurrentTime=function(n){this.ytplayer.seekTo(n,!0);this.player_.trigger("timeupdate");this.player_.trigger("seeking");this.isSeeking=!0};videojs.Youtube.prototype.playbackRate=function(){return this.ytplayer&&this.ytplayer.getPlaybackRate?this.ytplayer.getPlaybackRate():1};videojs.Youtube.prototype.setPlaybackRate=function(n){this.ytplayer&&this.ytplayer.setPlaybackRate&&(this.ytplayer.setPlaybackRate(n),this.player_.trigger("ratechange"))};videojs.Youtube.prototype.duration=function(){return this.ytplayer&&this.ytplayer.getDuration?this.ytplayer.getDuration():0};videojs.Youtube.prototype.currentSrc=function(){return this.srcVal};videojs.Youtube.prototype.ended=function(){return this.ytplayer?this.lastState===YT.PlayerState.ENDED:!1};videojs.Youtube.prototype.volume=function(){return this.ytplayer&&isNaN(this.volumeVal)&&(this.volumeVal=this.ytplayer.getVolume()/100,this.player_.volume(this.volumeVal)),this.volumeVal};videojs.Youtube.prototype.setVolume=function(n){typeof n!="undefined"&&n!==this.volumeVal&&(this.ytplayer.setVolume(n*100),this.volumeVal=n,this.player_.trigger("volumechange"))};videojs.Youtube.prototype.muted=function(){return this.mutedVal};videojs.Youtube.prototype.setMuted=function(n){n?(this.storedVolume=this.volumeVal,this.ytplayer.mute(),this.player_.volume(0)):(this.ytplayer.unMute(),this.player_.volume(this.storedVolume));this.mutedVal=n;this.player_.trigger("volumechange")};videojs.Youtube.prototype.buffered=function(){var t,n;if(this.ytplayer&&this.ytplayer.getVideoBytesLoaded){if(t=this.ytplayer.getVideoBytesLoaded(),n=this.ytplayer.getVideoBytesTotal(),!t||!n)return 0;var i=this.ytplayer.getDuration(),u=t/n*i,r=this.ytplayer.getVideoStartBytes()/n*i;return videojs.createTimeRange(r,r+u)}return videojs.createTimeRange(0,0)};videojs.Youtube.prototype.supportsFullScreen=function(){return typeof this.el_.webkitEnterFullScreen=="function"&&(/Android/.test(videojs.USER_AGENT)||!/Chrome|Mac OS X 10.5/.test(videojs.USER_AGENT))?!0:!1};videojs.Youtube.isSupported=function(){return!0};videojs.Youtube.canPlaySource=function(n){return n.type==="video/youtube"};videojs.Youtube.canControlVolume=function(){return!0};videojs.Youtube.loadingQueue=[];videojs.Youtube.prototype.loadYoutube=function(){this.ytplayer=new YT.Player(this.id_,{events:{onReady:function(n){n.target.vjsTech.onReady()},onStateChange:function(n){n.target.vjsTech.onStateChange(n.data)},onPlaybackQualityChange:function(n){n.target.vjsTech.onPlaybackQualityChange(n.data)},onError:function(n){n.target.vjsTech.onError(n.data)}}});this.ytplayer.vjsTech=this};videojs.Youtube.makeQueryString=function(n){var i=["modestbranding=1"];for(var t in n)n.hasOwnProperty(t)&&i.push(t+"="+n[t]);return i.join("&")};window.onYouTubeIframeAPIReady=function(){for(var n;n=videojs.Youtube.loadingQueue.shift();)n.loadYoutube();videojs.Youtube.loadingQueue=[];videojs.Youtube.apiReady=!0};videojs.Youtube.prototype.onReady=function(){this.isReady_=!0;this.triggerReady();this.player_.trigger("loadedmetadata");this.player_.trigger("durationchange");this.player_.trigger("timeupdate");typeof this.player_.loadingSpinner=="undefined"||this.isIos||this.isAndroid||this.player_.loadingSpinner.hide();this.player_.options().muted&&this.setMuted(!0);this.playOnReady&&(this.playOnReady=!1,this.play())};videojs.Youtube.prototype.updateQualities=function(){function e(t){i(t,"click",function(){var t=this.getAttribute("data-val"),i;f.ytplayer.setPlaybackQuality(t);f.userQuality=t;n(f.qualityTitle,videojs.Youtube.parseQualityName(t));i=f.qualityMenuContent.querySelector(".vjs-selected");i&&videojs.Youtube.removeClass(i,"vjs-selected");videojs.Youtube.addClass(this,"vjs-selected")})}var r=this.ytplayer.getAvailableQualityLevels(),f=this,u,t;if(r.indexOf(this.userQuality)<0&&n(f.qualityTitle,videojs.Youtube.parseQualityName(this.defaultQuality)),r.length===0)this.qualityButton.style.display="none";else{for(this.qualityButton.style.display="";this.qualityMenuContent.hasChildNodes();)this.qualityMenuContent.removeChild(this.qualityMenuContent.lastChild);for(u=0;u<r.length;++u)t=document.createElement("li"),t.setAttribute("class","vjs-menu-item"),n(t,videojs.Youtube.parseQualityName(r[u])),t.setAttribute("data-val",r[u]),r[u]===this.quality&&videojs.Youtube.addClass(t,"vjs-selected"),e(t),this.qualityMenuContent.appendChild(t)}};videojs.Youtube.prototype.onStateChange=function(n){if(n!==this.lastState){switch(n){case-1:this.player_.trigger("durationchange");break;case YT.PlayerState.ENDED:this.player_.options().ytcontrols||(this.playerEl_.querySelectorAll(".vjs-poster")[0].style.display="block",typeof this.player_.bigPlayButton!="undefined"&&this.player_.bigPlayButton.show());this.player_.trigger("ended");break;case YT.PlayerState.PLAYING:this.playerEl_.querySelectorAll(".vjs-poster")[0].style.display="none";this.playVideoIsAllowed=!0;this.updateQualities();this.player_.trigger("timeupdate");this.player_.trigger("durationchange");this.player_.trigger("playing");this.player_.trigger("play");this.isSeeking&&(this.player_.trigger("seeked"),this.isSeeking=!1);break;case YT.PlayerState.PAUSED:this.player_.trigger("pause");break;case YT.PlayerState.BUFFERING:this.player_.trigger("timeupdate");this.player_.options().ytcontrols||this.player_.trigger("waiting")}this.lastState=n}};videojs.Youtube.convertQualityName=function(n){switch(n){case"144p":return"tiny";case"240p":return"small";case"360p":return"medium";case"480p":return"large";case"720p":return"hd720";case"1080p":return"hd1080"}return"auto"};videojs.Youtube.parseQualityName=function(n){switch(n){case"tiny":return"144p";case"small":return"240p";case"medium":return"360p";case"large":return"480p";case"hd720":return"720p";case"hd1080":return"1080p"}return"auto"};videojs.Youtube.prototype.onPlaybackQualityChange=function(t){if(typeof this.defaultQuality!="undefined"||(this.defaultQuality=t,typeof this.userQuality=="undefined")){this.quality=t;n(this.qualityTitle,videojs.Youtube.parseQualityName(t));switch(t){case"medium":this.player_.videoWidth=480;this.player_.videoHeight=360;break;case"large":this.player_.videoWidth=640;this.player_.videoHeight=480;break;case"hd720":this.player_.videoWidth=960;this.player_.videoHeight=720;break;case"hd1080":this.player_.videoWidth=1440;this.player_.videoHeight=1080;break;case"highres":this.player_.videoWidth=1920;this.player_.videoHeight=1080;break;case"small":this.player_.videoWidth=320;this.player_.videoHeight=240;break;case"tiny":this.player_.videoWidth=144;this.player_.videoHeight=108;break;default:this.player_.videoWidth=0;this.player_.videoHeight=0}this.player_.trigger("ratechange")}};videojs.Youtube.prototype.onError=function(n){this.player_.error(n);(n===100||n===101||n===150)&&(this.player_.bigPlayButton.hide(),this.player_.loadingSpinner.hide(),this.player_.posterImage.hide())};videojs.Youtube.addClass=function(n,t){(" "+n.className+" ").indexOf(" "+t+" ")===-1&&(n.className=n.className===""?t:n.className+" "+t)};videojs.Youtube.removeClass=function(n,t){var i,r;if(n.className.indexOf(t)!==-1){for(i=n.className.split(" "),r=i.length-1;r>=0;r--)i[r]===t&&i.splice(r,1);n.className=i.join(" ")}};var t=document.createElement("style"),r=" .vjs-youtube .vjs-poster { background-size: 100%!important; }.vjs-youtube .vjs-poster, .vjs-youtube .vjs-loading-spinner, .vjs-youtube .vjs-big-play-button, .vjs-youtube .vjs-text-track-display{ pointer-events: none !important; }.vjs-youtube.vjs-user-active .iframeblocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-tech.onDesktop { pointer-events: none; }.vjs-quality-button > div:first-child > span:first-child { position:relative;top:7px }";t.setAttribute("type","text/css");document.getElementsByTagName("head")[0].appendChild(t);t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r));Array.prototype.indexOf||(Array.prototype.indexOf=function(n){var i=this.length>>>0,t=Number(arguments[1])||0;for(t=t<0?Math.ceil(t):Math.floor(t),t<0&&(t+=i);t<i;t++)if(t in this&&this[t]===n)return t;return-1})})();
//# sourceMappingURL=youtube.min.js.map
